# 🔐 이 문서는 데이터를 다루면서 지켜야 할 보안사항에 대해 정리한 문서입니다.
 
## 금융 합성 데이터 활용 시 준수해야 할 보안 지침

본 프로젝트는 AI Hub의 [금융 합성 데이터](https://aihub.or.kr/aihubdata/data/view.do?dataSetSn=71792)를 기반으로 하며, 데이터의 특성상 **재식별 가능성 및 부적절한 사용 위험**이 존재할 수 있습니다. 이에 따라, 다음 지침을 **엄격히 준수**해야 합니다.

---

## ✅ 무엇을 해야 하는가 (DO)

### 1. `data/` 디렉토리 내 데이터 파일은 Git 추적에서 반드시 제외할 것

- **근거**: [AI Hub 이용정책](https://www.aihub.or.kr/intrcn/guid/usagepolicy.do)에 따라 데이터는 외부에 공유될 수 없음
- **위험성**: GitHub 등 퍼블릭 저장소에 업로드될 경우, 합성이라 하더라도 **법적 책임 발생 가능성**
- **조치 예시**: `.gitignore`에 아래 항목 포함  
  ```bash
  /data/raw/
  /data/processed/

### 2. [데이터 접근은 제한된 인원만 가능하도록 권한 설정](https://www.law.go.kr/lsInfoP.do?lsiSeq=248613#0000)

- **근거**: 개인정보 보호법 제29조
- **위험성**: 접근 권한이 없는 인원이 데이터에 접근할 경우, 책임 소재 불분명
- **조치 예시**: 클라우드 저장소 접근은 IAM 정책 또는 SAS Token으로 제한

### 3. [분석 시 개인 식별 가능성을 줄이기 위한 추가 익명화 적용](https://www.korea.kr/briefing/pressReleaseView.do?newsId=156666624)
- **근거**: 개인정보보호위원회 합성데이터 활용 가이드

- **위험성**: 구매 패턴, 연령대, 위치 정보가 조합되면 간접 식별자로 작용할 수 있음

- **조치 예시**: 
    * 주소 → 시/도 단위로 축소
    * 나이 → 범주형 그룹화
    * 이름/전화번호 해시 처리

### 4. 외부 보고서, 시각화에는 절대 원시 식별값 포함 금지

- **근거**: AI Hub 데이터 제공 목적은 "비식별 상태 기반 분석"

- **위험성**: 리포트, 발표자료 유출 시 식별 가능 정보 노출 위험

- **조치 예시**:
    * 리포트에 포함되는 표, 그래프는 모두 집계 단위
    * "홍길동", "010-" 등 표기 확인 후 제거

## ❌ 하지 말아야 하는 것 (DON'T)

### 1. 데이터를 Git에 커밋하거나 Push하지 말 것

- **위험성**: 영구 기록으로 남아 삭제 불가능 → 정보 유출

- **실제 사고 예시**: GitGuardian 2022 보고서에 따르면 공개 GitHub 저장소에서 100만건 이상의 민감 정보 유출 발견

### 2. 합성 데이터라도 상업적 목적(판매, 외부 서비스 개발)에 사용 금지
- **근거**: AI Hub의 모든 데이터는 비상업적 연구, 개발, 학습에 한해 사용 가능

- **위반 시**: 민형사상 책임 및 이용제한 대상

- **예시**: 스타트업 앱, 금융 상품 추천 서비스 등에 데이터 내장 → 금지

### 3. Slack, Notion 등 비보안 협업 도구에 원본 데이터를 공유하지 말 것
- **위험성**: 외부 접근자가 있을 수 있고, 보안 설정이 미흡할 수 있음

- **대안**: 암호화 파일 공유 시스템 또는 접근 제어된 클라우드(Azure blob)만 사용

### 4. 실사용자 정보와 합성 데이터를 결합하여 분석 시도 금지
- **근거**: 합성 데이터의 목적은 “훈련 및 테스트용”이지 실제 응용 결합용이 아님

- **위험성**: 재식별 및 정책 위반 가능성

# 🔐 익명성을 보장해주는 파이썬 `anonymize(value)` 함수 설명

## 📌 개요

`anonymize` 함수는 문자열 데이터를 **SHA-256 해시 함수**를 통해 **익명화(가명화)** 처리하는 함수입니다.  
이를 통해 이름, 전화번호, 이메일 등 민감한 데이터를 **복호화 불가능한 방식으로 보호**할 수 있습니다.

---
## Azure환경에서 보안

### 🔐 1. [스토리지 보안 (Azure Blob Storage 기준)](https://learn.microsoft.com/en-us/azure/storage/blobs/security-recommendations)
| 항목                                      | 설명                                            |
| --------------------------------------- | --------------------------------------------- |
| **프라이빗 Blob 컨테이너 설정**                   | 기본적으로 외부에서는 접근 불가하게 설정해야 함                    |
| **SAS 토큰 사용 (Shared Access Signature)** | 임시 접근 URL만 발급, 일정 기간 이후 자동 만료                 |
| **Storage 계정에 방화벽 적용**                  | 특정 IP나 서브넷에서만 접근 허용                           |
| **암호화 (Encryption at Rest)**            | Azure Storage의 기본 암호화(256-bit AES)를 활성화 상태 유지 |
| **Soft Delete 활성화**                     | 실수로 삭제한 데이터 복구 가능하게 설정                        |

### 👥 2. [사용자 및 접근 제어 (IAM + RBAC)](https://learn.microsoft.com/ko-kr/azure/role-based-access-control/overview)
| 항목                              | 설명                                     |
| ------------------------------- | -------------------------------------- |
| **RBAC (역할 기반 접근 제어)**          | 최소 권한 원칙 적용: 데이터 조회자, 데이터 관리자 구분       |
| **Azure Active Directory 연동**   | 사용자 인증을 AAD 기반으로 제한하고 2FA 적용 권장        |
| **리소스 그룹 단위 권한 분리**             | 프로젝트별 환경을 구분하고 팀별 권한 부여                |
| **서비스 프린시플(Service Principal)** | Databricks와 Azure Blob 간 안전한 인증용 ID 사용 |

### 🧪 3. [Databricks 내 보안 설정](https://learn.microsoft.com/en-us/azure/databricks/security/)
| 항목                             | 설명                                                  |
| ------------------------------ | --------------------------------------------------- |
| **Unity Catalog 활성화**          | 데이터 테이블, 컬럼 단위 권한 관리 가능                             |
| **Databricks Secret Scope 사용** | API 키, 데이터베이스 패스워드 등의 민감 정보는 코드에 하드코딩하지 않고 시크릿으로 저장 |
| **IP 접근 제한**                   | Databricks Workspace에 허용된 IP만 접근 가능하게 제한 설정 가능      |
| **Cluster Policy 설정**          | 민감 데이터를 다루는 클러스터에는 특정 컴퓨팅 리소스와 정책만 허용               |

### 🌐 4. [네트워크 보안](https://learn.microsoft.com/en-us/azure/security/fundamentals/network-best-practices)
| 항목                                   | 설명                                                         |
| ------------------------------------ | ---------------------------------------------------------- |
| **Private Endpoint 설정**              | Storage, Databricks 등을 Public IP 없이 내부 가상 네트워크(VNet)에서만 접근 |
| **NSG(Network Security Group)**      | 불필요한 포트, 프로토콜, 인바운드 트래픽 차단                                 |
| **Azure Firewall + DDoS Protection** | 외부 공격을 방지하기 위한 보안 계층 추가                                    |

### 📜 5. [로그 및 감사](https://learn.microsoft.com/en-us/azure/azure-monitor/platform/activity-log?tabs=powershell)
| 항목                                | 설명                                       |
| --------------------------------- | ---------------------------------------- |
| **Azure Monitor + Log Analytics** | 사용자 접근 기록, API 호출 내역, 삭제/변경 로그 기록        |
| **Activity Log Alerts 설정**        | 민감 리소스(예: Storage)에 대한 수상한 접근 시 관리자에게 알림 |
| **Databricks Audit Log 설정**       | 노트북 실행, 데이터 접근, 작업 실행 로그를 저장             |


## 🧠 함수 코드

```python
import hashlib

def anonymize(value):
    return hashlib.sha256(value.encode()).hexdigest()

anonymize("홍길동")
# 출력 예시: 'ad1b29e4a1d27e9050e073cbd1ef7f7e42e9bcb233f1b3fc3b0b42c5e17e78bb'
```
| 항목           | 설명                              |
| ------------ | ------------------------------- |
| **일방향 암호화**  | 복호화 불가능 (비가역성)                  |
| **고정 길이 출력** | 입력 길이와 무관하게 항상 64자리 문자열 출력      |
| **분석 가능**    | 동일 입력 → 동일 해시 (분석은 가능, 복호화는 불가) |
| **식별 불가**    | 원문을 직접 저장하지 않음으로써 개인정보 보호 가능    |

### ⚠️ 사용 시 주의사항
 - 해시만으로는 완전한 익명성 보장 불가능 (사전 공격이나 무차별 대입 공격에 취약)
 - 솔트(Salt) 추가 권장:
```python
def anonymize_with_salt(value, salt="MySecret123"):
    return hashlib.sha256((value + salt).encode()).hexdigest()
```
| 적용 대상 | 설명                             |
| ----- | ------------------------------ |
| 고객 이름 | "홍길동" → SHA-256 해시값 저장         |
| 전화번호  | "01012345678" → 해시로 변환 후 로그 저장 |
| 고객 ID | 분석용 ID를 해시화하여 재식별 위험 제거        |



